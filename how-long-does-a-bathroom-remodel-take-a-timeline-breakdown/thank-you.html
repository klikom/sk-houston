<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="robots" content="noindex, nofollow"> <!-- Prevent indexing of thank you page -->
    <title>Thank You - SK Houston Constructions</title>

    <!-- AD PLATFORM CONFIGURATION -->
    <script>
      // Get URL parameters for ad platform configuration
      const urlParams = new URLSearchParams(window.location.search);
      const adSource = urlParams.get('source');
      const pixelId = urlParams.get('pixel');

      // Configure your ad platform IDs and conversion values here
      const AD_CONFIG = {
        facebook: {
          pixelId: 'YOUR_FACEBOOK_PIXEL_ID',
          conversionValue: 0,
          currency: 'USD'
        },
        google: {
          conversionId: 'YOUR_GOOGLE_ADS_CONVERSION_ID',
          conversionLabel: 'YOUR_GOOGLE_ADS_CONVERSION_LABEL',
          conversionValue: 0
        },
        bing: {
          tagId: 'YOUR_BING_TAG_ID',
          conversionValue: 0
        },
        taboola: {
          accountId: 'YOUR_TABOOLA_ACCOUNT_ID',
          conversionId: 'YOUR_TABOOLA_CONVERSION_ID'
        },
        outbrain: {
          advertiserId: '00f6b10024d1caa0e1363c1f0485f94134',
          pixelId: 'YOUR_OUTBRAIN_PIXEL_ID'
        }
      };

      // Update configuration based on source
      if (adSource && pixelId) {
        switch(adSource.toLowerCase()) {
          case 'fb':
            AD_CONFIG.facebook.pixelId = pixelId;
            break;
          case 'google':
            AD_CONFIG.google.conversionId = pixelId;
            break;
          case 'bing':
            AD_CONFIG.bing.tagId = pixelId;
            break;
          case 'taboola':
            AD_CONFIG.taboola.accountId = pixelId;
            break;
          case 'outbrain':
            AD_CONFIG.outbrain.pixelId = pixelId;
            break;
        }
      }

      // Function to fire all conversion pixels
      function fireConversionPixels() {
        // Facebook Pixel
        if (typeof fbq !== 'undefined') {
          fbq('init', AD_CONFIG.facebook.pixelId);
          fbq('track', 'Lead', {
            value: AD_CONFIG.facebook.conversionValue,
            currency: AD_CONFIG.facebook.currency,
          });
        }

        // Google Ads
        if (typeof gtag !== 'undefined') {
          gtag('js', new Date());
          gtag('config', AD_CONFIG.google.conversionId);
          gtag('event', 'conversion', {
            'send_to': AD_CONFIG.google.conversionId + '/' + AD_CONFIG.google.conversionLabel,
            'value': AD_CONFIG.google.conversionValue,
            'currency': 'USD'
          });
        }

        // Bing Ads
        if (typeof window.uetq !== 'undefined') {
          window.uetq.push('event', 'Lead', {
            'revenue_value': AD_CONFIG.bing.conversionValue,
            'currency': 'USD'
          });
        }

        // Taboola
        if (typeof window._tfa !== 'undefined') {
          window._tfa.push({
            notify: 'event',
            name: 'lead',
            id: AD_CONFIG.taboola.accountId,
            revenue: AD_CONFIG.taboola.conversionValue
          });
        }

        // Outbrain
        if (typeof obApi !== 'undefined') {
          obApi('track', 'PAGE_VIEW');
          obApi('track', 'Lead');
        }
      }

      // Fire pixels after page load
      window.addEventListener('load', function() {
        // Small delay to ensure all pixel scripts are loaded
        setTimeout(fireConversionPixels, 1000);
      });
    </script>

    <!-- Facebook Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s) {
        if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    </script>

    <!-- Google Ads Conversion Tracking -->
    <script async src="https://www.googletagmanager.com/gtag/js"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
    </script>

    <!-- Bing Ads UET Tag -->
    <script>
      (function(w,d,t,r,u){
        var f,n,i;w[u]=w[u]||[],f=function(){
          var o={ti: AD_CONFIG.bing.tagId};
          o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")
        },
        n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){
          var s=this.readyState;s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)
        },i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)
      })(window,document,"script","//bat.bing.com/bat.js","uetq");
    </script>

    <!-- Taboola Pixel -->
    <script>
      window._tfa = window._tfa || [];
      !function (t, f, a, x) {
        if (!document.getElementById(x)) {
          t.async = 1;t.src = a;t.id=x;f.parentNode.insertBefore(t, f);
        }
      }(document.createElement('script'),
      document.getElementsByTagName('script')[0],
      '//cdn.taboola.com/libtrc/unip/' + AD_CONFIG.taboola.accountId + '/tfa.js',
      'tb_tfa_script');
    </script>

    <!-- Outbrain Pixel -->
    <script data-obct type="text/javascript">
      /** DO NOT MODIFY THIS CODE**/
      !function(_window, _document) {
        var OB_ADV_ID = AD_CONFIG.outbrain.advertiserId;
        if (_window.obApi) {
          var toArray = function(object) {
            return Object.prototype.toString.call(object) === '[object Array]' ? object : [object];
          };
          _window.obApi.marketerId = toArray(_window.obApi.marketerId).concat(toArray(OB_ADV_ID));
          return;
        }
        var api = _window.obApi = function() {
          api.dispatch ? api.dispatch.apply(api, arguments) : api.queue.push(arguments);
        };
        api.version = '1.1';
        api.loaded = true;
        api.marketerId = OB_ADV_ID;
        api.queue = [];
        var tag = _document.createElement('script');
        tag.async = true;
        tag.src = '//amplify.outbrain.com/cp/obtp.js';
        tag.type = 'text/javascript';
        var script = _document.getElementsByTagName('script')[0];
        script.parentNode.insertBefore(tag, script);
      }(window, document);
    </script>

    <!-- Link to shared styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Thank-you page specific styles -->
    <style>
      body {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        background-color: var(--background);
        position: relative;
        overflow: hidden;
      }

      /* Loading state */
      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--background);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        transition: opacity 0.5s ease-out;
      }

      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 4px solid var(--gray-200);
        border-top: 4px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .content-wrapper {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
      }

      .content-wrapper.loaded {
        opacity: 1;
        transform: translateY(0);
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Background image container */
      body::before {
        content: '';
        position: fixed;
        top: -5px;
        left: -5px;
        width: calc(100% + 10px);
        height: calc(100% + 10px);
        background-image: url('https://sk-houston.b-cdn.net/assets/thank-you-bg.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0;
        z-index: 0;
        filter: blur(8px);
        transform: scale(1.02);
        transition: opacity 0.5s ease-out;
      }

      body.bg-loaded::before {
        opacity: 0.25;
      }

      .thank-you-container {
        background: var(--white);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        padding: var(--space-2xl);
        max-width: 700px;
        width: var(--content-width);
        margin: var(--space-md);
        text-align: center;
        position: relative;
        z-index: 1;
        background: rgba(255, 255, 255, 0.97);
      }

      .thank-you-icon {
        width: 180px;
        height: auto;
        margin: 0 auto var(--space-xl);
        transition: transform var(--transition);
      }

      .thank-you-icon:hover {
        transform: translateY(-2px);
      }

      h1 {
        color: var(--primary);
        font-size: var(--font-size-3xl);
        margin-bottom: var(--space-lg);
        line-height: 1.2;
      }

      #name-display {
        color: var(--secondary);
      }

      #dynamic-message {
        font-size: var(--font-size-lg);
        line-height: 1.6;
        margin-bottom: var(--space-xl);
        color: var(--text);
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .back-to-home {
        display: inline-block;
        background: var(--primary);
        color: var(--white);
        text-decoration: none;
        padding: var(--space-sm) var(--space-xl);
        border-radius: var(--radius);
        transition: all var(--transition);
        font-weight: 600;
        font-size: var(--font-size-base);
        min-height: 48px;
        line-height: 48px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .back-to-home:hover {
        background: var(--secondary);
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }

      .highlight {
        color: var(--primary);
        font-weight: bold;
      }

      /* Medium devices (768px and down) */
      @media (max-width: 768px) {
        .thank-you-container {
          width: min(100% - 2rem, 600px);
          padding: var(--space-xl);
          margin: var(--space-md) auto;
        }

        .thank-you-icon {
          width: 140px;
          margin-bottom: var(--space-lg);
        }

        h1 {
          font-size: var(--font-size-2xl);
          margin-bottom: var(--space-md);
        }

        #dynamic-message {
          font-size: var(--font-size-base);
          margin-bottom: var(--space-lg);
        }

        .back-to-home {
          width: 100%;
          padding: var(--space-sm) var(--space-md);
        }
      }

      /* Small devices (480px and down) */
      @media (max-width: 480px) {
        .thank-you-container {
          width: min(100% - 1rem, 480px);
          padding: var(--space-lg);
          margin: var(--space-sm) auto;
          border-radius: var(--radius);
        }

        .thank-you-icon {
          width: 120px;
          margin-bottom: var(--space-md);
        }

        h1 {
          font-size: var(--font-size-xl);
          margin-bottom: var(--space-sm);
        }

        #dynamic-message {
          font-size: var(--font-size-base);
          margin-bottom: var(--space-md);
        }

        .back-to-home {
          font-size: var(--font-size-sm);
          min-height: 44px;
          line-height: 44px;
        }
      }

      /* Touch device optimizations */
      @media (hover: none) and (pointer: coarse) {
        .back-to-home {
          min-height: 48px;
          padding: 12px 24px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Loading overlay -->
    <div class="loading-overlay">
      <div class="loading-spinner"></div>
    </div>

    <!-- Content wrapper -->
    <div class="content-wrapper">
      <div class="thank-you-container">
        <img class="thank-you-icon" src="https://sk-houston.b-cdn.net/assets/sk-logo-b.png" alt="SK Houston Constructions Logo">
        <h1>Thank You<span id="name-display"></span>!</h1>
        <p id="dynamic-message">We've received your message and will get back to you shortly.</p>
        <a href="https://www.skhoustonconstructions.com/" class="back-to-home">Return to Homepage</a>
      </div>
    </div>

    <script>
      // Loading handler
      window.addEventListener('load', function() {
        // Hide loading overlay and show content after everything is loaded
        const loadingOverlay = document.querySelector('.loading-overlay');
        const contentWrapper = document.querySelector('.content-wrapper');
        const body = document.body;

        // Function to show content and hide loading overlay
        function showContent() {
          loadingOverlay.style.opacity = '0';
          setTimeout(() => {
            loadingOverlay.style.display = 'none';
          }, 500);
          contentWrapper.classList.add('loaded');
        }

        // Set a maximum loading time of 5 seconds
        const loadingTimeout = setTimeout(() => {
          console.log('Loading timeout reached, showing content');
          showContent();
        }, 5000);

        // Preload background image
        const bgImage = new Image();
        bgImage.src = 'https://sk-houston.b-cdn.net/assets/thank-you-bg.png';
        
        bgImage.onload = function() {
          // Clear the timeout since image loaded successfully
          clearTimeout(loadingTimeout);
          // Add loaded class to body for background image
          body.classList.add('bg-loaded');
          // Show content
          showContent();
        };

        bgImage.onerror = function() {
          // Clear the timeout since we're handling the error
          clearTimeout(loadingTimeout);
          console.error('Failed to load background image');
          // Show content anyway
          showContent();
        };
      });

      // Function to format date
      function formatDate(dateStr) {
        const date = new Date(dateStr);
        return date.toLocaleDateString('en-US', { 
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
      }

      // Get URL parameters
      const params = new URLSearchParams(window.location.search);
      const service = params.get('service');
      const date = params.get('date');
      const time = params.get('time');
      const name = params.get('name');

      // Create dynamic message if parameters exist
      if (service && date && time) {
        const messageElement = document.getElementById('dynamic-message');
        const nameElement = document.getElementById('name-display');
        const formattedDate = formatDate(date);
        const firstName = name ? name.split(' ')[0] : '';
        
        // Add name to the heading if available
        if (firstName) {
          nameElement.textContent = `, ${firstName}`;
        }
        
        // Create the main message with highlighted elements
        messageElement.innerHTML = `We've received your consultation request for <span class="highlight">${service}</span>. `;
        messageElement.innerHTML += `We look forward to meeting with you on <span class="highlight">${formattedDate}</span> between <span class="highlight">${time}</span>. `;
        messageElement.innerHTML += `Our team will be in touch to confirm your appointment details.`;
      }
    </script>
  </body>
</html> 